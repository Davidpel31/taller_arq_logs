guÃ­a de como usar proyecto

antes que todo debemos tener iniciado docker en nuestro PC

-----------------------------ğŸ§± 1ï¸âƒ£ Levantar todo el sistema

Desde la carpeta raÃ­z del proyecto (C:\taller_arq_logs):

# Levantar todos los contenedores

docker compose up -d

ğŸŸ¢ Esto levantarÃ¡:

postgres (base de datos)
rabbitmq (broker de mensajerÃ­a)
producer (simulador de datos)
consumer (procesador de datos)

Si hiciste cambios en el cÃ³digo, usa:
docker compose up --build -d

---

-----------------------------ğŸ§¾ 2ï¸âƒ£ Verificar que los contenedores estÃ©n corriendo

docker ps

---

-----------------------------ğŸ‡ 3ï¸âƒ£ Acceder al panel de RabbitMQ

ğŸ“ URL:
ğŸ‘‰ [http://localhost:15672](http://localhost:15672)

ğŸ” Credenciales:

user: admin
password: admin123

AhÃ­ podrÃ¡s ver:

Exchanges (productores publican aquÃ­)
Queues (colas donde el consumidor recibe)
Bindings (conexiones entre exchanges y colas)
Mensajes pendientes y procesados

---

-----------------------------ğŸ˜ 4ï¸âƒ£ Acceder a PostgreSQL desde DBeaver

ConfiguraciÃ³n de conexiÃ³n:

| Campo    | Valor      |
| -------- | ---------- |
| Host     | localhost  |
| Port     | 5432       |
| Database | weather_db |
| Username | admin      |
| Password | admin123   |

---

-----------------------------ğŸ§© 5ï¸âƒ£ Verificar que las tablas existen

Desde la terminal
docker exec -it postgres psql -U admin -d weather_db

Y luego ejecuta:

\dt

Debe aparecer:

public | logs          | table | admin
public | weather_logs  | table | admin

---

-----------------------------ğŸ“‹ 6ï¸âƒ£ Verificar que hay registros insertados

Dentro del cliente psql:

SELECT * FROM weather_logs ORDER BY id DESC LIMIT 10;

DeberÃ­as ver filas con datos como temperatura, humedad y timestamp.

---

-----------------------------ğŸ” 7ï¸âƒ£ Ver los logs de los servicios

# Logs en tiempo real:

docker logs -f producer
docker logs -f consumer
docker logs -f postgres
docker logs -f rabbitmq

DeberÃ­as ver mensajes como:

âœ… Mensaje publicado en RabbitMQ
ğŸ“¥ Mensaje recibido y procesado correctamente
ğŸ’¾ Registro insertado en PostgreSQL

---

-----------------------------ğŸ” 8ï¸âƒ£ Detener o reiniciar todo

# Detener contenedores

docker compose down

# Reiniciar todo el sistema

docker compose restart

---

-----------------------------ğŸ§  9ï¸âƒ£ Si apagas el PC y lo vuelves a encender

Solo ejecuta:

cd C:\taller_arq_logs
docker compose up -d

Y todo volverÃ¡ a la vida automÃ¡ticamente (con los datos guardados gracias al volumen postgres_data).

---

-----------------------------ğŸ§© 10ï¸âƒ£ Consultas Ãºtiles en la base de datos

# Ãšltimos registros insertados

SELECT * FROM weather_logs ORDER BY id DESC LIMIT 5;

# Promedio de temperatura por estaciÃ³n

SELECT estacion_id, AVG(temperatura) FROM weather_logs GROUP BY estacion_id;

# Conteo total de registros

SELECT COUNT(*) FROM weather_logs;

---


